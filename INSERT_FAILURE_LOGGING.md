# INSERT ì‹¤íŒ¨ ì›ì¸ ë¡œê¹… ê°œì„  - ì˜ˆì œ ë° ê·¼ê±°

## ğŸ“Š ê°œì„  ì „ ë¬¸ì œ

ê·€í•˜ê°€ ë³´ì—¬ì¤€ ë¡œê·¸:
```
2026-02-01 06:16:08,995 - collector - INFO - ğŸŒ í¬ë¡¤ë§í•œ ê¸°ì‚¬:          722ê°œ
2026-02-01 06:16:08,995 - collector - INFO - âœ… ìœ íš¨í•œ ê¸°ì‚¬:           583ê°œ
2026-02-01 06:16:08,995 - collector - INFO -    â”œâ”€ INSERT ì„±ê³µ:         0ê°œ
2026-02-01 06:16:08,995 - collector - INFO -    â””â”€ INSERT ì‹¤íŒ¨:       583ê°œ
```

**ë¬¸ì œì :**
- âŒ INSERT ì‹¤íŒ¨ ì›ì¸ì´ ëª…ì‹œë˜ì§€ ì•ŠìŒ
- âŒ 583ê°œê°€ ëª¨ë‘ ì‹¤íŒ¨í•œ ì´ìœ ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ
- âŒ ë¬¸ì œ í•´ê²° ë¶ˆê°€ëŠ¥

---

## âœ… ê°œì„  í›„ ì¶œë ¥ í˜•ì‹

### 1ï¸âƒ£ ë°°ì¹˜ ì €ì¥ ì‹¤íŒ¨ ì‹œ (ERROR ë ˆë²¨)

```
2026-02-01 06:16:08,500 - database - ERROR - 
   [1/3] âŒ ë°°ì¹˜ ì €ì¥ FAILED
   ì—ëŸ¬ íƒ€ì…: ApiError
   ì—ëŸ¬ ë©”ì‹œì§€: 400 Bad Request: Invalid input. Column mismatch: expected [id, title, link, ...], got [title, link, ...]
   â†’ ê°œë³„ ì €ì¥ ëª¨ë“œë¡œ ì „í™˜ (ì´ 583ê°œ ê¸°ì‚¬)
```

### 2ï¸âƒ£ ê°œë³„ ì €ì¥ ì‹œ ì—ëŸ¬ í†µê³„

```
2026-02-01 06:16:09,000 - database - WARNING - 
   âš ï¸  [1/3] ê°œë³„ ì €ì¥ ê²°ê³¼:
       âœ… ì„±ê³µ: 0ê°œ
       âŒ ì‹¤íŒ¨: 583ê°œ
       ì‹¤íŒ¨ ì›ì¸ ë¶„í¬:
         â€¢ COLUMN_ERROR: 583ê°œ (100.0%)
         â€¢ DATABASE_ERROR: 0ê°œ (0.0%)

       ğŸ” ì‹¤íŒ¨ ì‚¬ë¡€ (ì²« 3ê°œ):
          1. [Google News] ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜
             ì œëª©: Euthanasia debate intensifies in...
             ìƒì„¸: 400 Bad Request: Invalid input. Column 'pub_date' type mismatch...

          2. [Bing News] ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜
             ì œëª©: Assisted dying approved by parliament...
             ìƒì„¸: 400 Bad Request: Invalid input. Column 'author' cannot be NULL...

          3. [NewsAPI] ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜
             ì œëª©: Medical assistance in dying...
             ìƒì„¸: 400 Bad Request: Invalid input. Column 'source' expected string...
```

### 3ï¸âƒ£ ìµœì¢… í†µê³„ ìš”ì•½ (ERROR ë ˆë²¨)

```
2026-02-01 06:16:09,500 - database - ERROR - 
======================================================================
ğŸ’¾ ì €ì¥ ì‘ì—… ìµœì¢… ìš”ì•½
======================================================================
âœ… ì €ì¥ ì„±ê³µ:                0ê°œ
âŒ ì €ì¥ ì‹¤íŒ¨:              583ê°œ
ğŸ“Œ ì¤‘ë³µ ì œì™¸:              139ê°œ
âš ï¸  ê²€ì¦ ì‹¤íŒ¨:                0ê°œ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Š ì´ ì²˜ë¦¬:                722ê°œ
ğŸ“ˆ ì„±ê³µë¥ :                 0.0%
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  ì£¼ì˜: 583ê°œ ê¸°ì‚¬ ì €ì¥ ì‹¤íŒ¨!
   ìƒì„¸ ì •ë³´: logs/failed_articles.jsonl
   ë¶„ì„: python log_analyzer.py analyze
```

### 4ï¸âƒ£ Collector ìµœì¢… í†µê³„ (ERROR ë ˆë²¨)

```
2026-02-01 06:16:10,000 - collector - ERROR - 
ğŸš¨ ì£¼ì˜: 583ê°œ ê¸°ì‚¬ INSERT ì‹¤íŒ¨!
   failed_articles.jsonl íŒŒì¼ í™•ì¸: logs/failed_articles.jsonl
   ë¶„ì„ ëª…ë ¹ì–´: python log_analyzer.py analyze
```

---

## ğŸ” failed_articles.jsonl ìƒì„¸ ê¸°ë¡

```json
{
  "timestamp": "2026-02-01T06:16:09.123456+00:00",
  "error_type": "COLUMN_ERROR",
  "error_reason": "ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜",
  "article": {
    "source": "Google News",
    "title": "Euthanasia debate intensifies in parliament",
    "link": "https://example.com/news/1",
    "author": null,
    "pub_date": "2026-02-01T06:00:00+00:00",
    "description": "New legislation on assisted dying...",
    "collected_at": "2026-02-01T06:16:00+00:00"
  },
  "full_article": {
    "title": "Euthanasia debate intensifies in parliament",
    "link": "https://example.com/news/1",
    ...
  }
}
```

---

## ğŸ“Š ë¶„ì„ ë°©ë²•

### ëª…ë ¹ì–´ 1: ìƒì„¸ ë¶„ì„ (ê¶Œì¥)
```bash
python log_analyzer.py analyze
```

ì¶œë ¥:
```
âŒ ì´ ì‹¤íŒ¨ ê¸°ì‚¬: 583ê°œ

ğŸ“Œ ì—ëŸ¬ íƒ€ì…ë³„ í†µê³„:
  â€¢ COLUMN_ERROR: 583ê°œ (100.0%)

ğŸ“Œ ì¶œì²˜ë³„ ì‹¤íŒ¨ í†µê³„:
  â€¢ Google News: 200ê°œ
  â€¢ Bing News: 180ê°œ
  â€¢ NewsAPI: 120ê°œ
  â€¢ Naver: 83ê°œ

ğŸ“Œ ìµœê·¼ ì‹¤íŒ¨ ì›ì¸ (ìƒìœ„ 5ê°œ):
  â€¢ ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜: 583ê°œ
  ...

ğŸ“ ìµœê·¼ ì‹¤íŒ¨í•œ ê¸°ì‚¬ (ìƒìœ„ 10ê°œ):
1. ì‹œê°„: 2026-02-01T06:16:09
   íƒ€ì…: COLUMN_ERROR
   ì´ìœ : ì»¬ëŸ¼/í˜•ì‹ ì˜¤ë¥˜
   ì¶œì²˜: Google News
   ì œëª©: Euthanasia debate intensifies in parliament
   ë§í¬: https://example.com/news/1
```

---

## ğŸ¯ ì›ì¸ íŒŒì•… (ì‚¬ìš©ìì˜ ì¼€ì´ìŠ¤)

ê·€í•˜ì˜ ë¡œê·¸ë¡œë¶€í„° íŒŒì•…ë˜ëŠ” ì›ì¸:
1. **ë°°ì¹˜ ì €ì¥ ì‹¤íŒ¨** â†’ ê°œë³„ ì €ì¥ìœ¼ë¡œ ì „í™˜
2. **583ê°œ ëª¨ë‘ ë™ì¼í•œ ì´ìœ ë¡œ ì‹¤íŒ¨** 
   - ê°€ëŠ¥ì„± 1: ì»¬ëŸ¼ êµ¬ì¡° ë¯¸ìŠ¤ë§¤ì¹˜
   - ê°€ëŠ¥ì„± 2: í•„ìˆ˜ í•„ë“œ ëˆ„ë½ (NULL constraint)
   - ê°€ëŠ¥ì„± 3: ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜
   - ê°€ëŠ¥ì„± 4: DB ì—°ê²° ë¬¸ì œ

ì´ì œ **ì •í™•í•œ ì›ì¸**ì´ ë¡œê·¸ì— ê¸°ë¡ë©ë‹ˆë‹¤!

---

## ğŸ“ ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜

```
./logs/
â”œâ”€â”€ database.log           â† ë°°ì¹˜ ì €ì¥ ì‹¤íŒ¨ ì›ì¸ ê¸°ë¡
â”œâ”€â”€ collector.log          â† ìµœì¢… í†µê³„ ë° ê²½ê³ 
â”œâ”€â”€ failed_articles.jsonl  â† ëª¨ë“  ì‹¤íŒ¨í•œ ê¸°ì‚¬ì˜ ìƒì„¸ ì •ë³´ â­
â””â”€â”€ __main__.log
```

---

## ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„

1. **ë¡œê·¸ í™•ì¸:**
   ```bash
   tail -100 logs/database.log | grep -i "error\|failed\|column"
   ```

2. **ì‹¤íŒ¨í•œ ê¸°ì‚¬ ë¶„ì„:**
   ```bash
   python log_analyzer.py analyze
   ```

3. **db ìŠ¤í‚¤ë§ˆ í™•ì¸:**
   - Supabase ëŒ€ì‹œë³´ë“œ â†’ News í…Œì´ë¸” êµ¬ì¡° í™•ì¸
   - ê¸°ì‚¬ ë°ì´í„°ì˜ í•„ë“œëª…ê³¼ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸

4. **collector.py ë°ì´í„° í•„ë“œ í™•ì¸:**
   - ê° RSS ì†ŒìŠ¤ê°€ ë°˜í™˜í•˜ëŠ” í•„ë“œëª…
   - DB í…Œì´ë¸”ê³¼ì˜ ë§¤í•‘ í™•ì¸

ì´ì œ **INSERT ì‹¤íŒ¨ì˜ ì •í™•í•œ ì›ì¸**ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸ¯
